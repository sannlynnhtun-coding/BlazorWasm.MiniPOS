@inject IJSRuntime JsRuntime

<div id="@Id" class="w-full h-full"></div>

@code {
    [Parameter]
    public string? Id { get; set; }

    [Parameter]
    public string? Title { get; set; }

    [Parameter]
    public DonutChartResponseModel? PastFiveYearData { get; set; }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (PastFiveYearData?.data is not null)
        {
            // Prepare data for Highcharts: list of { name: '...', y: ... }
            var highchartsData = PastFiveYearData.data.Select(x => new { name = x.name, y = x.value }).ToList();
            await JsRuntime.InvokeVoidAsync("renderHighchartsPie", Id, Title, highchartsData);
        }
    }
}
